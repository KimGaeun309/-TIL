# Shell & Shell Editors

## 1. 컴퓨터의 기본적인 시스템 체계(운영체제)

### **기본적인 컴퓨터 체계**

컴퓨터는 하드웨어와 소프트웨어로 나뉘고, 소프트웨어는 시스템 소프트웨어와 응용 소프트웨어로 나뉜다. 시스템 소프트웨어는 사용자들이 컴퓨터에서 응용 소프트웨어를 실행시키려 할 때 하드웨어와의 소통을 통해 수행시켜주는 프로그램들의 집합이다. 우리는 이 프로그램의 집합체를 운영체제라고 한다. 

### **운영체제의 기본적인 구조**

프로그램들을 실행시킬 때 공통적으로 내재되어야 하는 프로그램들을 운영체제라고 한다.

> 예를 들어, A(B + C) = AB + AC 와 같은 경우, A를 컴퓨터에 내장시켜두고 B와 C만 입력받아 원하는 값을 구하는 것
> 

운영체제가 컴퓨터에서 차지하는 공간은 하드웨어와의 소통을 주관하는 커널 공간과 사용자와 직접적으로 연결된 사용자 공간으로 분류된다. 

### **시스템 체계의 구조**

Shell은 커널공간과 사용자공간을 이어주는 공간 역할을 한다. 사용자 공간에서 커널 공간으로 내리는 명령어를 Shell이라고 한다. 명령어를 입력하는 공간이 우리에게 어떻게 보여질까? CLI와 GUI의 개념은 여기서 나온다. 

CLI는 Command Line Interface로 명령어를 치는 공간이다. window+r → cmd enter 하면 나오는 까만 창은 윈도우에서 사용하는 커맨드 프롬포트라는 하나의 커맨드 실행 창이다. window+r → powershell enter 하면 나오는 파란 창은 파워 쉘이다. 윈도우는 이와 같이 커맨드 프롬포트와 파워 쉘, 이 두 가지로 커널 공간과 이야기할 수 있는 공간이 마련되어있다.  GUI는 Graphical User Interface로 바탕화면 같은 것이 그 예이다. 마우스 사용으로 제어한다. 서버 개발 등을 할 때에는 GUI 환경에서 작업하는 것은 힘들다. 기본적인 명령어만 익혀도 컴퓨터 설정을 할 때 CLI 환경으로 자유롭게 할 수 있을 것이다.

### **핵심 내용**

Shell은 운영체제 중 사용자와 닿아 있는 사용자 공간과 하드웨어와 밀접한 커널 공간을 이어주는 역할을 하는 공간이다. 명령어를 입력하는 공간은 CLI(까만창, 마우스X), GUI(바탕화면 등, 마우스 O) 이 두 가지 모습으로 우리에게 보여지는 CLI 환경에서 명령어를 사용해 제어하는 것이 서버 개발 등을 할 때는 더 편하다.

## 2. Shell 커맨드 명령어

### **Shell 실습을 위한 환경구축**

운영체제의 종류가 바뀐다면 구성된 공간의 성격과 명령어가 달라질 것이다. 우리가 자주 볼 수 있는 운영 체제는 Window, 맥OS, Linux 세 가지가 있다. 우리는 이번 수업에서 Linux 운영체제의 Shell 명령어와 Window의 파워 쉘에 대해 알아볼 것이다. Linux 운영 체제 실습을 위해서는 먼저 환경을 설정해야 한다. (+ CLI 창에서는 왼쪽 마우스로 드래그하면 클립보드에 복사되고 오른쪽 마우스를 클릭하면 붙여넣기가 된다) → ubuntu 설치.

+) 컴퓨터에는 하나의 운영체제만 깔린다. wsl은 윈도우 환경에서 리눅스를 사용할 수 있도록 만들어주는 리눅스용 윈도우 하위 시스템이다. 우리는 윈도우 운영체제의 폴더들을 똑같이 접근할 수 있다. 

### **기본적인 Shell 명령어**

- `pwd` (Print working directory) : 현재 작업중인 디렉터리 출력
- `cd` (Change Directory) : 디렉터리 (경로) 이동 (하위 디렉터리로)
- `cd ..` : (상위 디렉터리로)
- `ls` (List) : 디렉터리 목록 확인
- `cp` (Copy) : 파일 또는 디렉터리 복사 (cp jay.txt jay2.txt) (cp jay2.txt /mnt/d)
- `mv` (Move) : 파일 혹은 디렉터리의 이동
- `mkdir` (Make Directory) : 디렉터리의 생성
- `rm` (Remove)  : 파일이나 디렉터리를 지움
- `rm -d` : 빈 디렉터리를 지움
- `cat` (concatenate) : 1) 단순 파일 내용 출력 2) 파일의 조작 (단순히 `cat` 만 사용하면 문서를 읽는 역할을 하지만 `cat >` 을 하면 파일 안에 문장을 입력시키거나 지울 수 있다.)
- `--help` : 명령어 사용 방법 알려줌  `cp --help`
- `man` (Manual) : 명령어의 역할, 사용법, 옵션을 설명해줌, q 치면 설명 사라짐
- Find 명령어나 파이프라인, Grep 명령어 같은 경우에는 간단하게 설명하기 힘들어 과제로 구글로 서치해보세요
- Find 명령어 : 찾을 때
- 파이프라인 : 앞 명령어 수행의 결과를 받아 다음 명령어 수행
- Grep 명령어 : 입력으로 전달된 파일 내 지정 문자열 찾아 출력

### **Shell 실습을 위한 환경구축**

Window 운영체제에서 Power Shell을 다룰 건데 cmd도 존재한다. 하지만 Power Shell 환경이 개발자들에게 더 선호된다. Power Shell 에서는 Linux 명령어들을 등록시켜 그대로 사용할 수 있고 이것이 Power Shell 의 강점 중 하나이다.

PowerShell의 세 가지 주요 Cmdlet

- Get-Command : 현재 컴퓨터에 사용 가능한 명령어를 검색하고 싶을 때
- Get-Help : 명령어를 어떻게 사용하는지 알아볼 때 (-detailed)명령을 통해 옵션 확인도 가능
- Get-Member : 개체 유형의 정식 이름과 멤버의 목록을 보고싶을 때

Alias를 활용하면 첫 시작이 쉽다.

파이프라인의 사용을 매우 추천합니다.

자동화 스크립트 .sh를 작성하는 것에 유용하다.

## 3. vi를 사용한 문서편집 (Shell Editor)

### **리눅스 상에서의 문서 편집기의 종류 및 특징**

GUI 환경과 달리 리눅스에서는 터미널에서 직접적으로 사용할 수 있는 편집기인 vi를 통해서 문서를 편집할 수 있다.

### **기본 사용 방법**

마지막 행 모드, 명령 모드, 입력 모드가 존재한다. 

**명령 모드** : 커서 이동 / 줄, 글자 삭제, 복사

- `zz` : 작업한 내용을 저장하고 vi를 종료
- `i` : 현재 커서 자리에 입력 (입력 모드로 전환)
- `a` : 현재 커서 다음 자리에 입력 (입력 모드로 전환)
- `:` : 마지막 행 모드로 전환

**입력 모드** : 문자의 입력

문자의 입력이 가능하고, ESC를 눌러 명령 모드로 이동할 수 있습니다

**마지막행 모드** :  저장 및 종료

명령 모드에서 `:` 를 입력하면 전환되는 모드이며, 저장과 종료가 가능합니다

- `q` : 작업한 것이 없을 시 종료
- `q!` : 작업한 내용을 저장하지 않고 종료
- `w (파일명)` : 현재 작업한 내용을 저장만 함, 파일명을 입력 시 다른 이름으로 저장
- `wq` : 작업한 내용을 저장하고 종료
- `wq!` : 작업한 내용을 저장한 뒤 강제로 종료

### **추가 기능**

**커서 이동하기**

vi에서는 `k` (위), `l` (오른쪽), `h` (왼쪽), `j` (아래) 로 커서를 이동할 수 있다. 

**명령 취소하기**

삭제나 수정을 잘못할 경우 ctrl + z 가 아닌 u를 눌러 명령을 취소할 수 있다.

**Page Down, Page Up**

**복사, 자르기, 붙여넣기**

- `yy` : 커서가 위치한 행을 복사 (명령 앞에 숫자 입력 시 입력 숫자만큼의 행을 복사 `3yy`)
- `dd` : 커서가 위치한 행을 잘라냄 (명령 앞에 숫자 입력 시 입력 숫자만큼의 행을 잘라냄)
- `p` : 커서가 위치한 행의 아래쪽에 붙여넣음

**문자열 검색하기**

ctrl+f 가 아닌 `/문자열` 으로 아래 방향으로 찾고 `?문자열` 으로 위 방향으로 찾을 수 있다.

기존 찾던 방향으로 계속 문자열을 찾을 경우 `n`, 반대 방향으로 문자열을 찾을 경우는 `N`



